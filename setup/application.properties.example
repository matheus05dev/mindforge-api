spring.application.name=Mind Forge
spring.config.import=optional:classpath:application-oauth.properties

# --- Database Configuration ---
# Em Docker use 'postgres' como host, local use 'localhost'
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:5432/mindforge
spring.datasource.username=mindforge_user
spring.datasource.password=mindforge_pass
spring.datasource.driver-class-name=org.postgresql.Driver

# Hibernate configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.defer-datasource-initialization=false

# Flyway configuration
spring.flyway.enabled=false

# --- Server Configuration ---
server.port=8080

# --- Spring MVC Async Configuration ---
# Timeout para requests assincronas (aumentado para dar tempo ao Ollama processar)
spring.mvc.async.request-timeout=600000

# --- GitHub OAuth Configuration ---
# Crie seu App em: https://github.com/settings/developers
github.client.id=SEU_CLIENT_ID_AQUI
github.client.secret=SEU_CLIENT_SECRET_AQUI

# --- Ollama AI Provider Configuration ---
# Se rodando via Docker, use http://ollama:11434
ollama.api.url=http://localhost:11434/api/chat
ollama.model=llama3.2

# --- Ollama Embedding Configuration ---
ollama.embedding.base-url=http://localhost:11434
ollama.embedding.model=nomic-embed-text
ollama.model.text=llama3.2
zollama.model.legacy-vision=llava

# --- Groq AI Provider Configuration ---
# Obtenha sua chave em: https://console.groq.com/keys
groq.api.url=https://api.groq.com/openai/v1/chat/completions
groq.api.key=SUA_CHAVE_GROQ_AQUI
groq.budget.tokens-per-minute=6000
groq.budget.safety-margin=200
groq.budget.enabled=true

# --- Tavily Web Search Configuration ---
# Obtenha sua chave em: https://tavily.com/
tavily.api.key=SUA_CHAVE_TAVILY_AQUI

# --- Resilience4j (Circuit Breaker & Rate Limiter) ---
resilience4j.ratelimiter.instances.aiProvider.limitForPeriod=10
resilience4j.ratelimiter.instances.aiProvider.timeoutDuration=120s

resilience4j.circuitbreaker.instances.aiProvider.slidingWindowSize=10
resilience4j.circuitbreaker.instances.aiProvider.failureRateThreshold=50
resilience4j.circuitbreaker.instances.aiProvider.waitDurationInOpenState=20s

# Impede que o Spring corte a request antes da GPU terminar
# Timeout aumentado para 300s para dar tempo ao Ollama processar
resilience4j.timelimiter.instances.aiProvider.timeout-duration=300s
resilience4j.timelimiter.instances.ollamaProvider.timeout-duration=300s
resilience4j.timelimiter.instances.groqProvider.timeout-duration=120s

# --- File Upload Configuration ---
spring.servlet.multipart.max-file-size=20MB
spring.servlet.multipart.max-request-size=20MB
